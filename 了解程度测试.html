<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº†è§£ç¨‹åº¦æµ‹è¯• - ä½ æœ‰å¤šäº†è§£æˆ‘ï¼Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.2em;
        }
        
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        
        /* é¡µé¢åˆ‡æ¢ */
        .page {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .page.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* é¦–é¡µæ ·å¼ */
        #home {
            text-align: center;
        }
        
        .avatar {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            margin: 20px auto;
            background: linear-gradient(45deg, #3498db, #9b59b6);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            color: white;
        }
        
        .btn {
            background: linear-gradient(to right, #3498db, #9b59b6);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 50px;
            cursor: pointer;
            margin: 20px 10px;
            transition: transform 0.3s, box-shadow 0.3s;
            display: inline-block;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        /* ç­”é¢˜é¡µæ ·å¼ */
        .question {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid #3498db;
        }
        
        .question h3 {
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        .options label {
            display: block;
            padding: 12px 15px;
            margin: 8px 0;
            background: white;
            border-radius: 10px;
            cursor: pointer;
            border: 2px solid #e0e0e0;
            transition: all 0.3s;
        }
        
        .options label:hover {
            border-color: #3498db;
            background: #e3f2fd;
        }
        
        .options input:checked + label {
            border-color: #2ecc71;
            background: #d5f4e6;
        }
        
        .progress-bar {
            height: 10px;
            background: #ecf0f1;
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(to right, #2ecc71, #3498db);
            width: 0%;
            transition: width 0.5s;
        }
        
        /* ç»“æœé¡µæ ·å¼ */
        .score-display {
            font-size: 5em;
            text-align: center;
            color: #3498db;
            margin: 20px 0;
        }
        
        .result-message {
            text-align: center;
            font-size: 1.5em;
            margin: 20px 0;
            padding: 20px;
            border-radius: 15px;
            background: #f8f9fa;
        }
        
        .answers-list {
            margin: 30px 0;
        }
        
        .answer-item {
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            background: #f8f9fa;
        }
        
        .correct {
            border-left: 5px solid #2ecc71;
        }
        
        .wrong {
            border-left: 5px solid #e74c3c;
        }
        
        /* æ’åé¡µæ ·å¼ */
        .ranking-list {
            margin: 30px 0;
        }
        
        .ranking-item {
            display: flex;
            justify-content: space-between;
            padding: 15px;
            margin: 10px 0;
            background: #f8f9fa;
            border-radius: 10px;
            align-items: center;
        }
        
        .top-3 {
            background: linear-gradient(45deg, #ffeaa7, #fab1a0);
            font-weight: bold;
        }
        
        .rank-number {
            font-size: 1.3em;
            font-weight: bold;
            color: #3498db;
        }
        
        /* è¾“å…¥æ¡†æ ·å¼ */
        .name-input {
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
            border: 2px solid #ddd;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }
        
        .name-input:focus {
            outline: none;
            border-color: #3498db;
        }
        
        /* é¡µè„šå¯¼èˆª */
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            .btn {
                padding: 12px 25px;
                margin: 10px 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- é¦–é¡µ -->
        <div id="home" class="page active">
            <h1>ä½ æœ‰å¤šäº†è§£æˆ‘ï¼Ÿ</h1>
            <p class="subtitle">æµ‹è¯•ä¸€ä¸‹ä½ å¯¹æˆ‘çš„äº†è§£ç¨‹åº¦ï¼</p>
            
            <div class="avatar">
                ğŸ‘¤
            </div>
            
            <p style="margin: 20px 0; line-height: 1.6; color: #555;">
                å‡†å¤‡å¥½æ¥å—æŒ‘æˆ˜äº†å—ï¼Ÿ<br>
                10é“é€‰æ‹©é¢˜ï¼Œçœ‹çœ‹ä½ èƒ½ç­”å¯¹å¤šå°‘ï¼<br>
                è¶…è¿‡80åˆ†å¯ä»¥çœ‹åˆ°æ­£ç¡®ç­”æ¡ˆå“¦~
            </p>
            
            <button class="btn" onclick="startTest()">å¼€å§‹æµ‹è¯•</button>
            <button class="btn" onclick="showRanking()">æŸ¥çœ‹æ’å</button>
            
            <div style="margin-top: 30px; color: #7f8c8d; font-size: 0.9em;">
                <p>ğŸ“Š å·²æœ‰ <span id="participantCount">0</span> äººå‚ä¸æµ‹è¯•</p>
            </div>
        </div>
        
        <!-- ç­”é¢˜é¡µ -->
        <div id="test" class="page">
            <h2>äº†è§£ç¨‹åº¦æµ‹è¯•</h2>
            <p class="subtitle">ç¬¬ <span id="currentQuestion">1</span>/10 é¢˜</p>
            
            <div class="progress-bar">
                <div class="progress" id="progressBar"></div>
            </div>
            
            <div id="questionsContainer">
                <!-- é—®é¢˜ä¼šåŠ¨æ€åŠ è½½åˆ°è¿™é‡Œ -->
            </div>
            
            <div class="navigation">
                <button class="btn" onclick="previousQuestion()">ä¸Šä¸€é¢˜</button>
                <button class="btn" onclick="nextQuestion()" id="nextBtn">ä¸‹ä¸€é¢˜</button>
            </div>
        </div>
        
        <!-- ç»“æœé¡µ -->
        <div id="result" class="page">
            <h2>æµ‹è¯•ç»“æœ</h2>
            
            <div class="score-display" id="finalScore">0åˆ†</div>
            
            <div class="result-message" id="resultMessage">
                <!-- ç»“æœæ¶ˆæ¯ä¼šåŠ¨æ€æ˜¾ç¤º -->
            </div>
            
            <div id="answersContainer" class="answers-list">
                <!-- æ­£ç¡®ç­”æ¡ˆä¼šåŠ¨æ€æ˜¾ç¤º -->
            </div>
            
            <div id="nameInputSection" style="display: none;">
                <h3>è®°å½•ä½ çš„æˆç»©</h3>
                <input type="text" class="name-input" id="playerName" 
                       placeholder="è¾“å…¥ä½ çš„åå­—ï¼ˆå¯ä¸å¡«ï¼Œé»˜è®¤ï¼šåŒ¿åç©å®¶ï¼‰" maxlength="20">
                <button class="btn" onclick="saveScore()" style="width: 100%;">ä¿å­˜æˆç»©å¹¶æŸ¥çœ‹æ’å</button>
            </div>
            
            <div class="navigation">
                <button class="btn" onclick="showHome()">è¿”å›é¦–é¡µ</button>
                <button class="btn" onclick="retryTest()">é‡æ–°æµ‹è¯•</button>
            </div>
        </div>
        
        <!-- æ’åé¡µ -->
        <div id="ranking" class="page">
            <h2>æ’è¡Œæ¦œ</h2>
            <p class="subtitle">çœ‹çœ‹è°æœ€äº†è§£æˆ‘ï¼</p>
            
            <div class="ranking-list" id="rankingList">
                <!-- æ’åä¼šåŠ¨æ€åŠ è½½ -->
            </div>
            
            <div class="navigation">
                <button class="btn" onclick="showHome()">è¿”å›é¦–é¡µ</button>
                <button class="btn" onclick="startTest()">æˆ‘ä¹Ÿè¦æµ‹è¯•</button>
            </div>
        </div>
    </div>

    <script>
        // ==================== æ•°æ®é…ç½® ====================
        const questions = [
            {
                question: "æˆ‘ä¸€èˆ¬å‡ ç‚¹ç¡è§‰ï¼Ÿ",
                options: ["10ç‚¹å‰", "11~12ç‚¹", "1~2ç‚¹"],
                answer: 1 // ç¬¬äºŒä¸ªé€‰é¡¹ï¼ˆä»0å¼€å§‹è®¡æ•°ï¼‰
            },
            {
                question: "åœ¨å­¦æ ¡ï¼Œæˆ‘å–œæ¬¢ç‹¬å¤„è¿˜æ˜¯å’Œå¤§å®¶ä¸€èµ·çƒ­é—¹ï¼Ÿ",
                options: ["ç‹¬å¤„", "å’Œå¤§å®¶ä¸€èµ·"],
                answer: 1
            },
            {
                question: "è§‰å¾—æˆ‘å¼‚æ€§äººç¼˜å¥½å—ï¼Ÿ",
                options: ["å¥½", "ä¸å¥½"],
                answer: 0
            },
            {
                question: "ä½ è®¤ä¸ºæˆ‘å–„è‰¯å—ï¼Ÿ",
                options: ["å¾ˆå–„è‰¯", "æœ‰ä½†ä¸å¤š", "ä¸å–„è‰¯"],
                answer: 0
            },
            {
                question: "æˆ‘æœ€å–œæ¬¢çš„æ¸¸æˆæ˜¯ï¼Ÿ",
                options: ["Dancing Line", "Mini World", "Terraria", "ä»¥ä¸Šéƒ½ä¸æ˜¯"],
                answer: 0
            },
            {
                question: "æˆ‘æ›´å–œæ¬¢å“ªä¸ªå¹³å°ï¼Ÿ",
                options: ["æŠ–éŸ³", "å¿«æ‰‹", "Bilibili", "å°çº¢ä¹¦"],
                answer: 2
            },
            {
                question: "ç¡è§‰æ—¶ï¼Œæˆ‘å–œæ¬¢ï¼Ÿ",
                options: ["ä¾§å§", "å¹³èºº", "è¶´ç€"],
                answer: 0
            },
            {
                question: "æˆ‘ç©æ‰‹æœº/å¹³æ¿/ç”µè„‘æ—¶ï¼Œä¸€èˆ¬éƒ½å¹²å˜›ï¼Ÿ",
                options: ["åˆ·çŸ­è§†é¢‘", "ç©æ¸¸æˆ", "ç¤¾äº¤", "ä½¿ç”¨æµè§ˆå™¨"],
                answer: 2
            },
            {
                question: "æˆ‘é€šå¸¸ä½¿ç”¨ä»€ä¹ˆè½¯ä»¶å¬æ­Œï¼Ÿ",
                options: ["QQéŸ³ä¹", "æ±½æ°´éŸ³ä¹", "ç½‘æ˜“äº‘éŸ³ä¹"],
                answer: 0
            },
            {
                question: "ç°é˜¶æ®µï¼Œæˆ‘çš„æœ‹å‹ç®—å¤šå—ï¼Ÿ",
                options: ["å¾ˆå¤š", "è¾ƒå¤š", "ä¸æ€ä¹ˆå¤š", "å°‘"],
                answer: 1
            }
        ];

        // è¿™é‡Œä½ å¯ä»¥ä¿®æ”¹æˆå…³äºä½ è‡ªå·±çš„çœŸå®é—®é¢˜
        // åªéœ€ä¿®æ”¹ä¸Šé¢çš„é—®é¢˜å’Œç­”æ¡ˆå³å¯

        // ==================== å…¨å±€å˜é‡ ====================
        let currentQuestionIndex = 0;
        let userAnswers = new Array(questions.length).fill(null);
        let score = 0;
        let rankings = [];

        // ==================== é¡µé¢åˆ‡æ¢å‡½æ•° ====================
        function showPage(pageId) {
            // éšè—æ‰€æœ‰é¡µé¢
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            // æ˜¾ç¤ºç›®æ ‡é¡µé¢
            document.getElementById(pageId).classList.add('active');
            
            // å¦‚æœæ˜¯é¦–é¡µï¼Œæ›´æ–°å‚ä¸äººæ•°
            if (pageId === 'home') {
                updateParticipantCount();
            }
        }

        function showHome() {
            showPage('home');
        }

        function showTest() {
            showPage('test');
            loadQuestion();
        }

        function showResult() {
            showPage('result');
            calculateScore();
            displayResult();
            
            // å¦‚æœåˆ†æ•°è¶…è¿‡80%ï¼Œæ˜¾ç¤ºæ­£ç¡®ç­”æ¡ˆ
            if (score >= 8) {
                displayCorrectAnswers();
            }
            
            // æ˜¾ç¤ºå§“åè¾“å…¥æ¡†
            document.getElementById('nameInputSection').style.display = 'block';
        }

        function showRanking() {
            showPage('ranking');
            loadRankings();
        }

        // ==================== æµ‹è¯•é€»è¾‘ ====================
        function startTest() {
            // é‡ç½®æµ‹è¯•çŠ¶æ€
            currentQuestionIndex = 0;
            userAnswers = new Array(questions.length).fill(null);
            score = 0;
            showTest();
        }

        function loadQuestion() {
            const question = questions[currentQuestionIndex];
            const container = document.getElementById('questionsContainer');
            
            // æ›´æ–°è¿›åº¦
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            document.getElementById('progressBar').style.width = `${(currentQuestionIndex + 1) / questions.length * 100}%`;
            
            // åˆ›å»ºé—®é¢˜HTML
            container.innerHTML = `
                <div class="question">
                    <h3>${question.question}</h3>
                    <div class="options">
                        ${question.options.map((option, index) => `
                            <div>
                                <input type="radio" 
                                       name="answer" 
                                       value="${index}" 
                                       id="option${index}"
                                       ${userAnswers[currentQuestionIndex] === index ? 'checked' : ''}
                                       onchange="selectAnswer(${index})">
                                <label for="option${index}">${option}</label>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            // æ›´æ–°æŒ‰é’®æ–‡å­—
            const nextBtn = document.getElementById('nextBtn');
            if (currentQuestionIndex === questions.length - 1) {
                nextBtn.textContent = 'æŸ¥çœ‹ç»“æœ';
            } else {
                nextBtn.textContent = 'ä¸‹ä¸€é¢˜';
            }
        }

        function selectAnswer(answerIndex) {
            userAnswers[currentQuestionIndex] = answerIndex;
        }

        function nextQuestion() {
            // å¦‚æœæ²¡æœ‰é€‰æ‹©ç­”æ¡ˆï¼Œæç¤ºç”¨æˆ·
            if (userAnswers[currentQuestionIndex] === null) {
                alert('è¯·å…ˆé€‰æ‹©ç­”æ¡ˆï¼');
                return;
            }
            
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                // æœ€åä¸€é¢˜ï¼Œæ˜¾ç¤ºç»“æœ
                showResult();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        }

        // ==================== è®¡ç®—åˆ†æ•°å’Œæ˜¾ç¤ºç»“æœ ====================
        function calculateScore() {
            score = 0;
            for (let i = 0; i < questions.length; i++) {
                if (userAnswers[i] === questions[i].answer) {
                    score++;
                }
            }
        }

        function displayResult() {
            const scoreElement = document.getElementById('finalScore');
            const messageElement = document.getElementById('resultMessage');
            
            // æ˜¾ç¤ºåˆ†æ•°
            const percentage = (score / questions.length * 100).toFixed(0);
            scoreElement.textContent = `${percentage}åˆ†`;
            
            // æ ¹æ®åˆ†æ•°æ˜¾ç¤ºä¸åŒæ¶ˆæ¯
            let message = '';
            if (percentage >= 90) {
                message = 'ğŸ‰ å¤ªæ£’äº†ï¼ä½ çœŸçš„å¾ˆäº†è§£æˆ‘ï¼';
                scoreElement.style.color = '#e74c3c';
            } else if (percentage >= 80) {
                message = 'å‰å®³ï¼ä½ çœŸçš„å¾ˆäº†è§£æˆ‘ï¼';
                scoreElement.style.color = '#3498db';
            } else if (percentage >= 60) {
                message = 'è¿˜ä¸é”™ï¼å¯¹æˆ‘æœ‰ä¸€å®šäº†è§£ï¼';
                scoreElement.style.color = '#2ecc71';
            } else if (percentage >= 40) {
                message = 'è¿˜å¯ä»¥å†å¤šäº†è§£æˆ‘ä¸€ç‚¹å“¦ï¼';
                scoreElement.style.color = '#f39c12';
            } else {
                message = 'çœ‹æ¥æˆ‘ä»¬è¿˜éœ€è¦æ›´å¤šäº¤æµå‘¢ï¼';
                scoreElement.style.color = '#95a5a6';
            }
            
            messageElement.textContent = message;
        }

        function displayCorrectAnswers() {
            const container = document.getElementById('answersContainer');
            let html = '<h3>æ­£ç¡®ç­”æ¡ˆï¼š</h3>';
            
            questions.forEach((q, index) => {
                const userAnswer = userAnswers[index];
                const isCorrect = userAnswer === q.answer;
                const userAnswerText = userAnswer !== null ? q.options[userAnswer] : 'æœªå›ç­”';
                const correctAnswerText = q.options[q.answer];
                
                html += `
                    <div class="answer-item ${isCorrect ? 'correct' : 'wrong'}">
                        <p><strong>ç¬¬${index + 1}é¢˜ï¼š</strong>${q.question}</p>
                        <p>ä½ çš„ç­”æ¡ˆï¼š${userAnswerText} ${isCorrect ? 'âœ…' : 'âŒ'}</p>
                        <p>æ­£ç¡®ç­”æ¡ˆï¼š${correctAnswerText}</p>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // ==================== æ’åç³»ç»Ÿ ====================
        function saveScore() {
            const name = document.getElementById('playerName').value.trim() || 'åŒ¿åç©å®¶';
            const percentage = Math.round((score / questions.length) * 100);
            const timestamp = new Date().toLocaleString('zh-CN');
            
            // è·å–ç°æœ‰æ’å
            rankings = JSON.parse(localStorage.getItem('rankingData') || '[]');
            
            // æ·»åŠ æ–°è®°å½•
            rankings.push({
                name: name,
                score: percentage,
                date: timestamp,
                rawScore: score
            });
            
            // æŒ‰åˆ†æ•°æ’åº
            rankings.sort((a, b) => b.score - a.score);
            
            // åªä¿ç•™å‰100å
            if (rankings.length > 100) {
                rankings = rankings.slice(0, 100);
            }
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            localStorage.setItem('rankingData', JSON.stringify(rankings));
            
            // æ˜¾ç¤ºæ’å
            showRanking();
        }

        function loadRankings() {
            rankings = JSON.parse(localStorage.getItem('rankingData') || '[]');
            const container = document.getElementById('rankingList');
            
            if (rankings.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #7f8c8d;">æš‚æ— æ’åæ•°æ®ï¼Œå¿«æ¥æˆä¸ºç¬¬ä¸€ä¸ªå‚ä¸è€…å§ï¼</p>';
                return;
            }
            
            let html = '';
            rankings.forEach((item, index) => {
                const isTop3 = index < 3;
                const medal = index === 0 ? 'ğŸ¥‡' : index === 1 ? 'ğŸ¥ˆ' : index === 2 ? 'ğŸ¥‰' : '';
                
                html += `
                    <div class="ranking-item ${isTop3 ? 'top-3' : ''}">
                        <div>
                            <span class="rank-number">${medal} ç¬¬${index + 1}å</span>
                            <span style="margin-left: 20px; font-size: 1.1em;">${item.name}</span>
                        </div>
                        <div style="font-size: 1.2em; font-weight: bold; color: #3498db;">
                            ${item.score}åˆ†
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function updateParticipantCount() {
            rankings = JSON.parse(localStorage.getItem('rankingData') || '[]');
            document.getElementById('participantCount').textContent = rankings.length;
        }

        function retryTest() {
            startTest();
        }

        // ==================== åˆå§‹åŒ– ====================
        // é¡µé¢åŠ è½½æ—¶æ›´æ–°å‚ä¸äººæ•°
        document.addEventListener('DOMContentLoaded', function() {
            updateParticipantCount();
        });
    </script>
</body>
</html>
